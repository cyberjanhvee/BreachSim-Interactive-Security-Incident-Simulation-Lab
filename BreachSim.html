<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BreachSim | Security Incident Generator</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --panel-color: #1e293b;
            --text-color: #e2e8f0;
            --accent-color: #3b82f6;
            --danger-color: #ef4444;
            --success-color: #22c55e;
            --terminal-bg: #000000;
            --terminal-text: #33ff33;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--panel-color);
            padding: 20px;
            border-right: 1px solid #334155;
            display: flex;
            flex-direction: column;
        }

        .brand {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 30px;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-color);
            padding: 15px;
            text-align: left;
            cursor: pointer;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: background 0.2s;
            font-size: 1rem;
        }

        .nav-btn:hover, .nav-btn.active {
            background-color: var(--accent-color);
            color: white;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
        }

        .panel {
            background-color: var(--panel-color);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #334155;
            display: none; /* Hidden by default */
        }

        .panel.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 { margin-top: 0; border-bottom: 1px solid #334155; padding-bottom: 10px; }

        /* Controls */
        .control-group {
            margin-bottom: 15px;
        }

        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem; }
        
        input, select {
            width: 100%;
            padding: 10px;
            background-color: var(--bg-color);
            border: 1px solid #475569;
            color: white;
            border-radius: 6px;
        }

        button.action-btn {
            background-color: var(--danger-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
        }

        button.action-btn:hover { opacity: 0.9; }

        /* Terminal Output */
        .terminal {
            background-color: var(--terminal-bg);
            color: var(--terminal-text);
            font-family: 'Courier New', Courier, monospace;
            padding: 15px;
            border-radius: 8px;
            height: 300px;
            overflow-y: auto;
            border: 1px solid #333;
            margin-top: 20px;
            white-space: pre-wrap;
            font-size: 0.9rem;
        }

        .log-entry { margin-bottom: 5px; }
        .log-time { color: #888; margin-right: 10px; }
        .log-warn { color: yellow; }
        .log-crit { color: var(--danger-color); }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .stat-card {
            background-color: var(--bg-color);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-val { font-size: 2rem; font-weight: bold; }
        .stat-label { color: #94a3b8; font-size: 0.85rem; }

    </style>
</head>
<body>

    <div class="sidebar">
        <div class="brand">üõ°Ô∏è BreachSim</div>
        <button class="nav-btn active" onclick="switchTab('phishing')">üé£ Phishing Test</button>
        <button class="nav-btn" onclick="switchTab('malware')">ü¶† Malware Sandbox</button>
        <button class="nav-btn" onclick="switchTab('brute')">üîì Brute Force</button>
        <div style="margin-top: auto;">
            <button class="nav-btn" style="background-color: #334155;" onclick="exportData()">üíæ Export Incident JSON</button>
        </div>
    </div>

    <div class="main-content">
        
        <div id="phishing" class="panel active">
            <h2>Social Engineering Simulation</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-val" id="phi-sent">0</div>
                    <div class="stat-label">Emails Sent</div>
                </div>
                <div class="stat-card">
                    <div class="stat-val" style="color: orange" id="phi-click">0</div>
                    <div class="stat-label">Link Clicks</div>
                </div>
                <div class="stat-card">
                    <div class="stat-val" style="color: var(--danger-color)" id="phi-comp">0</div>
                    <div class="stat-label">Compromised</div>
                </div>
            </div>
            
            <div class="control-group">
                <label>Scenario Template</label>
                <select id="phishing-scenario">
                    <option value="hr">Urgent HR: Payroll Update</option>
                    <option value="it">IT Support: Password Expiry</option>
                    <option value="ceo">CEO Fraud: Gift Card Request</option>
                </select>
            </div>
            <div class="control-group">
                <label>Target Count</label>
                <input type="number" id="phishing-count" value="100" min="10" max="1000">
            </div>
            <button class="action-btn" onclick="runPhishing()">Launch Campaign</button>

            <div class="terminal" id="phishing-log">
                <div class="log-entry">System ready. Select a scenario to begin simulation.</div>
            </div>
        </div>

        <div id="malware" class="panel">
            <h2>Malware Sandbox Execution</h2>
            <div class="control-group">
                <label>Select Payload Type</label>
                <select id="malware-type">
                    <option value="ransomware">Ransomware (WannaCry Variant)</option>
                    <option value="spyware">Keylogger / Spyware</option>
                    <option value="trojan">Remote Access Trojan (RAT)</option>
                </select>
            </div>
            <div class="control-group">
                <label>Environment</label>
                <select>
                    <option>Windows 11 (Isolated VM)</option>
                    <option>Linux Server (Container)</option>
                </select>
            </div>
            <button class="action-btn" onclick="runMalware()">Execute in Sandbox</button>

            <div class="terminal" id="malware-log">
                <div class="log-entry">Sandbox environment initialized. Waiting for payload...</div>
            </div>
        </div>

        <div id="brute" class="panel">
            <h2>Brute-Force Attack Simulation</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-val" id="bf-attempts">0</div>
                    <div class="stat-label">Attempts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-val" style="color: var(--success-color)" id="bf-blocked">0</div>
                    <div class="stat-label">Firewall Blocked</div>
                </div>
                <div class="stat-card">
                    <div class="stat-val" style="color: var(--danger-color)" id="bf-success">0</div>
                    <div class="stat-label">Successful Logins</div>
                </div>
            </div>

            <div class="control-group">
                <label>Target Service</label>
                <select id="bf-service">
                    <option value="SSH">SSH (Port 22)</option>
                    <option value="RDP">RDP (Port 3389)</option>
                    <option value="FTP">FTP (Port 21)</option>
                </select>
            </div>
            <div class="control-group">
                <label>Attack Speed (Req/sec)</label>
                <input type="range" min="10" max="1000" value="500">
            </div>
            <button class="action-btn" onclick="runBruteForce()">Start Attack Simulation</button>

            <div class="terminal" id="brute-log">
                <div class="log-entry">Network monitor active. Ready to simulate traffic.</div>
            </div>
        </div>

    </div>

    <script>
        // Global Incident Data Store
        let incidentData = [];

        // Tab Switching Logic
        function switchTab(tabId) {
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Helper: Logger
        function logToTerminal(elementId, message, type = 'info') {
            const terminal = document.getElementById(elementId);
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = 'log-entry';
            
            let color = 'inherit';
            if (type === 'warn') color = 'yellow';
            if (type === 'crit') color = '#ef4444';
            
            div.innerHTML = `<span class="log-time">[${time}]</span> <span style="color:${color}">${message}</span>`;
            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight; // Auto-scroll

            // Save to JSON structure
            incidentData.push({
                timestamp: new Date().toISOString(),
                module: elementId.split('-')[0],
                severity: type,
                message: message
            });
        }

        // 1. Phishing Logic
        function runPhishing() {
            const scenario = document.getElementById('phishing-scenario').value;
            const count = parseInt(document.getElementById('phishing-count').value);
            const logId = 'phishing-log';
            
            document.getElementById('phi-sent').innerText = count;
            document.getElementById('phi-click').innerText = 0;
            document.getElementById('phi-comp').innerText = 0;

            logToTerminal(logId, `Initiating Campaign: ${scenario.toUpperCase()}`);
            logToTerminal(logId, `Sending ${count} emails...`);

            let clicks = 0;
            let compromised = 0;

            // Simulate async events
            let interval = setInterval(() => {
                if (Math.random() > 0.7) {
                    clicks++;
                    document.getElementById('phi-click').innerText = clicks;
                    logToTerminal(logId, `User clicked link: ${generateFakeEmail()}`, 'warn');
                    
                    if (Math.random() > 0.6) {
                        compromised++;
                        document.getElementById('phi-comp').innerText = compromised;
                        logToTerminal(logId, `CREDENTIALS CAPTURED for ${generateFakeEmail()}`, 'crit');
                    }
                }

                if (clicks > count * 0.4) { // Stop after 40% interaction rate roughly
                    clearInterval(interval);
                    logToTerminal(logId, `Campaign Complete. Report Generated.`);
                }
            }, 200);
        }

        // 2. Malware Logic
        function runMalware() {
            const type = document.getElementById('malware-type').value;
            const logId = 'malware-log';
            
            logToTerminal(logId, `Allocating sandbox resources...`);
            setTimeout(() => logToTerminal(logId, `Detonating payload: ${type}.exe`), 1000);

            setTimeout(() => {
                if (type === 'ransomware') {
                    logToTerminal(logId, `DETECTED: File encryption attempt on C:\\Users\\Admin\\Documents`, 'crit');
                    logToTerminal(logId, `Process creates mutex: Global\\WannaCry`, 'warn');
                    logToTerminal(logId, `Network connection attempt: 192.168.1.55 (C2 Server)`, 'crit');
                } else if (type === 'spyware') {
                    logToTerminal(logId, `DETECTED: Hook installed on keyboard driver`, 'crit');
                    logToTerminal(logId, `Hidden file created: C:\\Temp\\log.dat`, 'warn');
                } else {
                    logToTerminal(logId, `DETECTED: Outbound connection to unknown IP`, 'warn');
                    logToTerminal(logId, `Registry Key Modified: HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run`, 'crit');
                }
            }, 2500);

            setTimeout(() => {
                logToTerminal(logId, `Sandbox Analysis Complete. Signature Generated.`);
            }, 4000);
        }

        // 3. Brute Force Logic
        function runBruteForce() {
            const service = document.getElementById('bf-service').value;
            const logId = 'brute-log';
            let attempts = 0;
            let blocked = 0;
            
            logToTerminal(logId, `Targeting Service: ${service}`);
            
            let interval = setInterval(() => {
                attempts += Math.floor(Math.random() * 50);
                document.getElementById('bf-attempts').innerText = attempts;

                if (Math.random() > 0.5) {
                    const ip = `192.168.1.${Math.floor(Math.random() * 255)}`;
                    logToTerminal(logId, `Failed login from ${ip} (User: admin)`, 'info');
                    
                    if (attempts % 5 === 0) {
                        blocked++;
                        document.getElementById('bf-blocked').innerText = blocked;
                        logToTerminal(logId, `Firewall BLOCKED IP ${ip} after repeated failures`, 'warn');
                    }
                }

                if (attempts > 1000) {
                    clearInterval(interval);
                    // Simulate one break through
                    document.getElementById('bf-success').innerText = 1;
                    logToTerminal(logId, `CRITICAL: SUCCESSFUL LOGIN DETECTED from 10.0.0.5`, 'crit');
                    logToTerminal(logId, `Simulation Terminated.`);
                }
            }, 100);
        }

        // Utils
        function generateFakeEmail() {
            const users = ['j.doe', 'alice.s', 'bob.m', 'finance.user', 'hr.admin'];
            const domains = ['corp.com', 'company.net'];
            return users[Math.floor(Math.random()*users.length)] + '@' + domains[Math.floor(Math.random()*domains.length)];
        }

        function exportData() {
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(incidentData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", "security_incident_report.json");
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
        }
    </script>
</body>
</html>